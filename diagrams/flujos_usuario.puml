@startuml
title Flujo de Usuario - LectoSistem (Generador de Exámenes)
skinparam backgroundColor white
skinparam activity {
  BackgroundColor #e1f5fe
  BorderColor #01579b
  ArrowColor #01579b
}

start
:Ingresar a la Plataforma;
:Seleccionar Pestaña **"Generador de Examen"**;
:Seleccionar **Grado Escolar**;
note right
  Primaria o Secundaria
  (Carga desempeños correspondientes)
end note

package "Configuración de Evaluación" {
  :Filtrar Desempeños por Capacidad;
  note right
    - Literal
    - Inferencial
    - Crítico
  end note
  
  :Seleccionar **Desempeños** específicos;
  
  :Configurar **Cantidad de Preguntas**;
  
  if (¿Usar Texto Base Personalizado?) then (Sí)
    :Activar "Usar Texto Base";
    :Subir Archivo (PDF / Word);
    :Sistema procesa y extrae texto;
  else (No)
    :Sistema seleccionará/generará texto
    basado en desempeños;
  endif
}

:Clic en botón **"Generar Preguntas"**;

partition "Procesamiento (Backend)" {
  :Construir Prompt para IA;
  :Enviar solicitud a Servicio IA (Gemini);
  :Recibir Respuesta JSON estructurada;
}

:Visualizar **Vista Previa** del Examen;
note left
  Muestra:
  - Título
  - Lectura
  - Preguntas
  - Solucionario
end note

:Clic en **"Descargar Word"**;
:Sistema genera archivo .docx;
:Usuario guarda el archivo;

stop
@enduml

@startuml
title Flujo de Usuario - MatSistem (Módulo de Matemáticas)
skinparam backgroundColor white
skinparam activity {
  BackgroundColor #f3e5f5
  BorderColor #4a148c
  ArrowColor #4a148c
}

start
:Ingresar a la Plataforma;
:Seleccionar Pestaña **"MatSistem"** (Nuevo Módulo);
:Seleccionar **Grado Escolar**;

package "Configuración de Ficha Matemática" {
  :Seleccionar **Competencia Matemática**;
  note right
    Ej:
    - Resuelve problemas de cantidad
    - Resuelve problemas de forma...
    - Resuelve problemas de gestión de datos...
  end note
  
  :Seleccionar **Capacidades/Desempeños**;
  
  :Configurar **Nivel de Dificultad**;
  note right
    - Básico
    - Intermedio
    - Avanzado
  end note

  :Configurar **Contexto/Tema** (Opcional);
  note right
    Ej: "Mercado", "Fútbol", 
    "Construcción", etc.
  end note
  
  :Definir **Cantidad de Problemas**;
}

:Clic en botón **"Generar Problemas"**;

partition "Procesamiento (Backend)" {
  :Seleccionar Estrategia/Plantilla Matemática;
  :Construir Prompt para IA (Especializado en Math);
  :Enviar solicitud a Servicio IA;
  :Recibir problemas (incluyendo fórmulas/gráficos);
}

:Visualizar **Vista Previa** de la Ficha;
note left
  Muestra:
  - Situación Problemática
  - Ejercicios
  - Espacio para resolución
end note

if (¿Requiere Solucionario?) then (Sí)
  :Generar paso a paso de resolución;
endif

:Clic en **"Descargar Ficha (Word/PDF)"**;
:Usuario guarda el archivo;

stop
@enduml
